{
  "title": "SPF - Caching",
  "head": "\n<link rel=\"stylesheet\" name=\"roboto\" href=\"//fonts.googleapis.com/css?family=Roboto:300,600,900|Roboto+Condensed:300,300italic,400,700|Inconsolata:400\">\n<link rel=\"stylesheet\" name=\"wsk\" href=\"/spfjs/assets/vendor/wsk/0.4.0/styles/wsk.css\">\n<link rel=\"stylesheet\" name=\"octicons\" href=\"/spfjs/assets/vendor/octicons/2.1.2/octicons.css\">\n<link rel=\"stylesheet\" name=\"main\" href=\"/spfjs/assets/styles/main.css?md5=4c082baca7bc0653891ae2e13476959a\">\n\n",
  "body": {
    "content": "\n<main class=\"clear\">\n\n  <nav class=\"toc g-wide--1 g-medium--1\">\n    \n  \n  \n  \n    <p class=\"toc__title\">\n      <a href=\"/spfjs/documentation/\">Documentation</a>\n    </p>\n  \n\n<ol class=\"toc__list list-links\">\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/start/\">Get Started</a>\n      \n      \n    </li>\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/responses/\">Responses</a>\n      \n      \n    </li>\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/events/\">Events</a>\n      \n      \n    </li>\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/resources/\">Resources</a>\n      \n      \n    </li>\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/versioning/\">Versioning</a>\n      \n      \n    </li>\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/caching/\">Caching</a>\n      \n      \n    </li>\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/features/\">Features</a>\n      \n      \n        \n  \n  \n  \n\n<ol class=\"toc__list list-links\">\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/features/multipart/\">Multipart Responses</a>\n      \n      \n    </li>\n  \n    <li>\n      \n        <a href=\"/spfjs/documentation/features/prefetching/\">Prefetching</a>\n      \n      \n    </li>\n  \n</ol>\n\n      \n    </li>\n  \n</ol>\n\n  </nav>\n\n  \n  \n\n  \n\n    <article class=\"g-wide--3 g-wide--last g-medium--2 g-medium--last\">\n      <header class=\"page-header container\">\n        <h2 class=\"xxlarge text-divider\">Caching</h2>\n        \n          <p class=\"page-header__excerpt g-wide--push-1 g-wide--pull-1\">\n            Custom response caching for greater application flexibility.\n          </p>\n        \n      </header>\n      <div class=\"container\">\n        <p>When building a complex web application, sometimes you want more\nflexibility than standard HTTP based caching in order to best\nbalance your application logic with performance.  SPF provides\na local configurable response cache that you can adjust as\nneeded.</p>\n\n<h2 id=\"when-the-cache-is-used\">When the cache is used</h2>\n\n<p>Before making a request, SPF checks the local cache to see if a\nvalid cached response is available for the requested URL.  If\none is found, then it will be used instead of sending a request\nover the network.  If not, after the response is received, SPF\nwill place that response in the local cache for future use.</p>\n\n<p>By default, SPF uses a caching model that matches the\nback-forward cache in browsers: &quot;new&quot; navigation will not use a\npreviously cached response, whereas &quot;history&quot; navigation will.\nThis means that your server will receive requests for every link\nclick, for example, but not for back button uses.  However, if\nthe <code>cache-unified</code> config value is set to <code>true</code>, then SPF will\nuse an available cache response for all navigation.  This will\nmean that your server will not receive requests for link clicks\nthat are to previously visited pages, just like for back button\npresses.</p>\n\n<p>When <a href=\"../prefetching/\">prefetching</a> responses, by default, SPF will place a\nprefetched response in the local cache as eligible for one &quot;new&quot;\nnavigation.  After that one use, the cached response will only\nbe eligible for &quot;history&quot; navigation.  However, if the\n<code>cache-unified</code> config value is set to <code>true</code>, then the\nprefetched response will be available for all navigation like\nother cached responses.</p>\n\n<h2 id=\"configuring-the-cache\">Configuring the cache</h2>\n\n<p>You may configure the cache using parameters to control the\ntotal number and lifetime of entries in the cache.  Increasing\nthese settings will increase the chance of finding a valid,\ncached response and also consume more memory in the browser.\nConversely, decreasing these settings will decrease the chance\nof finding a valid cached response and also consume less memory\nin the browser.  A list of the configuration parameters and\ntheir descriptions follows:</p>\n\n<p><strong><code>cache-lifetime</code></strong><br>\nThe maximum time in milliseconds a cache entry is considered\nvalid.  Defaults to <code>600000</code> (10 minutes).</p>\n\n<p><strong><code>cache-max</code></strong><br>\nThe maximum number of total cache entries.  Defaults to <code>50</code>.</p>\n\n<p><strong><code>cache-unified</code></strong><br>\nWhether to unify all cache responses instead of separating them\nby use (e.g. history, prefetching). Defaults to <code>false</code>.</p>\n\n<h2 id=\"automatic-garbage-collection\">Automatic garbage collection</h2>\n\n<p>The cache performs automatic garbage collection by removing\nentries at two times:</p>\n\n<ol>\n<li><p>If a requested entry is found but it is expired according to\nthe configured lifetime, the entry is removed from the cache\ninstead of being used.</p></li>\n<li><p>Each time a new entry is added, the\ncache does asynchronous garbage collection.  This garbage\ncollection first removes all expired entries, then if needed, it\nremoves entries in the cache that exceed the configured maximum\nsize with a least-recently-used (LRU) policy.</p></li>\n</ol>\n\n<h2 id=\"manually-adjusting-the-cache\">Manually adjusting the cache</h2>\n\n<p>Sometimes you might need to manually remove an entry from the\ncache.  For example, a user might take an action on the page\nthat changes it, and you would like future requests to reflect\nthat action; by making the next request the server, the response\nwill stay in sync.</p>\n\n<p>Each <a href=\"../../events/#event-descriptions\">spfdone</a> event specifies a <code>cacheKey</code> attribute in the\n<a href=\"../../../api/#spf.singleresponse\">response object</a>.  You can use this <code>cacheKey</code> to reference a\nspecific cache entry when calling API functions that manipulate\nthe cache.  A list of API functions and their descriptions\nfollow:</p>\n\n<p><strong><code>spf.cache.remove(key)</code></strong><br>\nRemoves an entry from the cache.  Pass a <code>cacheKey</code> from a\nresponse object to reference the entry you wish to remove.  See\nalso the API reference for <a href=\"../../../api/#spf.cache.remove\">spf.cache.remove</a>.</p>\n\n<p><strong><code>spf.cache.clear()</code></strong><br>\nRemoves all entries from the cache.  See also the API reference\nfor <a href=\"../../../api/#spf.cache.clear\">spf.cache.clear</a>.</p>\n\n      </div>\n      \n\n  \n\n\n\n\n\n\n<nav class=\"article-nav\">\n  \n    <a href=\"/spfjs/documentation/versioning/\" class=\"article-nav-link article-nav-link--prev\">\n      <p class=\"article-nav-count\">Versioning</p>\n      \n        <p class=\"article-nav-description\">Automatically update script and style versions.</p>\n      \n    </a>\n  \n  \n    <a href=\"/spfjs/documentation/features/\" class=\"article-nav-link article-nav-link--next\">\n      <p class=\"article-nav-count\">Features</p>\n      \n        <p class=\"article-nav-description\">Learn about SPF features to enable high performance.</p>\n      \n    </a>\n  \n</nav>\n\n    </article>\n\n  \n\n\n  <section class=\"feedback\">\n    <footer class=\"container\"><div class=\"container\">\n      <p>\n        If you have feedback, comments, or questions about SPF, please send them\n        to <a href=\"mailto:spfjs@googlegroups.com\">spfjs@googlegroups.com</a>.\n        If you have bugs or feature requests, please file them on\n        <a href=\"https://github.com/youtube/spfjs/issues\">GitHub</a>. Join our\n        <a href=\"https://groups.google.com/group/spfjs\">mailing list</a> and\n        follow <a href=\"https://twitter.com/spfjs\">@spfjs</a> on Twitter for\n        updates.\n      </p>\n    </div></footer>\n  </section>\n\n</main>\n\n"
  },
  "attr": {
    "body": {
      "class": "documentation"
    }
  },
  "foot": "\n<script name=\"spf\" src=\"/spfjs/assets/vendor/spf/2.1.1/spf.js\"></script>\n<script name=\"main\" src=\"/spfjs/assets/scripts/main.js?md5=41d2d6b89469117ea1c212e0183988b7\"></script>\n\n<script name=\"analytics\">\n  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n</script>\n<script>\n  if (window.location.hostname == 'youtube.github.io') {\n    ga('create', 'UA-52278317-1', 'auto');\n    ga('send', 'pageview');\n  }\n</script>\n\n"
}